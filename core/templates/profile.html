{% extends 'base.html' %}

{% block content %}
<div class="text-center mb-5">
    <h2 class="card-title" style="font-family: 'Montserrat', sans-serif; color: #ff9800; font-weight: bold;">{{ user.username }}'s Profile</h2>
    <p class="lead" style="color: #1976d2; font-family: 'Montserrat', sans-serif;">This is your space to share your passions and goals.</p>
</div>
<hr>
<div class="row">
    <div class="col-md-6">
        <div class="card mb-4 shadow-sm" style="border-radius: 18px; background: linear-gradient(135deg, #fffbe6 0%, #ffe0b2 100%);">
            <div class="card-body" style="font-family: 'Montserrat', sans-serif;">
                <h4 class="card-title" style="color: #1976d2; font-weight: bold;"><i class="fas fa-user-edit"></i> Update Your Info</h4>
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="mb-3">
                        <label for="{{ form.bio.id_for_label }}" class="form-label" style="color: #ff9800; font-weight: 500;">{{ form.bio.label }}</label>
                        <textarea name="{{ form.bio.name }}" id="{{ form.bio.id_for_label }}" class="form-control" rows="4" style="border-radius: 8px;">{{ form.bio.value|default_if_none:'' }}</textarea>
                    </div>
                    <div class="mb-3">
                        <label for="{{ form.goal.id_for_label }}" class="form-label" style="color: #1976d2; font-weight: 500;">{{ form.goal.label }}</label>
                        <input type="text" name="{{ form.goal.name }}" id="{{ form.goal.id_for_label }}" class="form-control" value="{{ form.goal.value|default_if_none:'' }}" style="border-radius: 8px;">
                    </div>
                    <div class="mb-3">
                        <label for="{{ form.image.id_for_label }}" class="form-label" style="color: #ff9800; font-weight: 500;">Profile Picture</label>
                        {{ form.image }}
                        {% if user.profile.image %}
                            <img src="{{ user.profile.image.url }}" class="img-thumbnail mt-2" style="max-width:150px; border-radius: 12px; border: 3px solid #ff9800;">
                        {% endif %}
                    </div>
                    <button type="submit" class="btn btn-primary" style="background-color: #1976d2; font-family: 'Montserrat', sans-serif; font-weight: bold; border-radius: 8px;">Save Profile <i class="fas fa-save"></i></button>
                </form>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card mb-4 shadow-sm" style="border-radius: 18px; background: linear-gradient(135deg, #fffbe6 0%, #ffe0b2 100%);">
            <div class="card-body" style="font-family: 'Montserrat', sans-serif;">
                <h4 class="card-title" style="color: #ff9800; font-weight: bold;"><i class="fas fa-star"></i> Your Posted Hobbies</h4>
                {% if not user_hobbies %}
                    <div class="alert alert-warning" style="border-radius: 8px; font-family: 'Montserrat', sans-serif;">
                        You haven't posted any hobbies yet. <a href="{% url 'create_hobby' %}" style="color: #1976d2; font-weight: bold;">Post one now!</a>
                        <br><small class="d-block mt-2">Remember, you need to have at least one hobby posted to apply for others.</small>
                    </div>
                {% else %}
                    <div class="list-group">
                        {% for hobby in user_hobbies %}
                            <a href="{% url 'hobby_detail' hobby.id %}" class="list-group-item list-group-item-action" style="font-family: 'Montserrat', sans-serif; color: #1976d2; font-weight: bold; border-radius: 8px; margin-bottom: 4px;">
                                <i class="fas fa-heart"></i> {{ hobby.title }}
                            </a>
                        {% endfor %}
                    </div>
                {% endif %}
                <p class="mt-3" style="font-family: 'Montserrat', sans-serif; color: #1976d2; font-weight: bold;"><strong>Overall Host Rating:</strong> {{ user.profile.get_host_rating|floatformat:1 }} / 5.0 <span style="color: #ff9800;">&#9733;</span></p>
                <h4 class="card-title mt-4" style="color: #1976d2; font-weight: bold;"><i class="fas fa-calendar-check"></i> Hobbies You've Signed Up For</h4>
                <ul style="font-family: 'Montserrat', sans-serif;">
                    {% for hobby in signed_up_hobbies %}
                        <li style="margin-bottom: 6px;">
                            <a href="{% url 'hobby_detail' hobby.id %}" style="color: #1976d2; font-weight: bold; text-decoration: none;">
                                {{ hobby.title }}
                            </a>
                            <span style="color: #ff9800;">({{ hobby.date|date:"M d, Y H:i" }} at {{ hobby.place }})</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_head %}
<!-- Montserrat font and Font Awesome icons -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
{% endblock %}